var Brickmove=(function(){var a=function(e){var f=arguments.callee;if(typeof f.instance==="object"){return f.instance}if(!(this instanceof f)){return new f(e)}var g=document,c=false;this.fast=e.fast||50;this.slow=e.slow||300;this.arr=b(e.row,e.col)||b(3,4);this.endCycle=e.endCycle>0?e.endCycle:4;this.accelerateCell=(e.accelerateCell&&e.accelerateCell>0&&e.accelerateCell<this.arr.length)?e.accelerateCell:3;this.tb=(e.containerId&&g.getElementById(e.containerId).innerHTML===""?f.buildTable(e):g.getElementById(e.tableId))||g.getElementById(e.tableId);this.isLocked=function(){return c};this.enLock=function(d){c=d};f.instance=this;function b(k,d){var p=[];for(var o=0;o<k;o++){p.push([]);for(var l=0;l<d;l++){p[o][l]=o*d+l}}var t=[],u=0,r=0,s="positive",q=0;while(u>=0&&u<d&&r>=0&&r<k&&q<k*d){q++;t.push([r,u]);if(s=="positive"){if(u==d-1){r++}else{u++}if(u==d-1&&r==k-1){s="negative"}}else{if(u==0){r--}else{u--}if(u==0&&r==0){break}}}return t}};a.prototype=(function(){var j=document,c,g,k,b=0,f=0,e,i,l=function(m,o){var d=o.length;if(Object.prototype.toString.call(m).slice(8,-1)==="Array"){for(var n=0;n<m.length;n++){if(m[n]<0||m[n]>d){m.splice(n,1)}}return m}};return{constructor:a,startLottery:function(d){var m=this;if(c){clearInterval(c)}g=0;k=false;m.enLock(true);e=0;i=Math.ceil(Math.random()*(m.arr.length-1));m.hitCallback=d.hitCallback;c=setInterval(function(){m.start.call(m,d)},m.slow)},start:function(d){var n=arguments.callee,m=d.brickcn,o=this;if(!k){if(e===o.accelerateCell){if(c){clearInterval(c)}c=setInterval(function(){n.call(o,d)},o.fast)}if(g==o.endCycle&&b==parseInt(i)){if(c){clearInterval(c)}k=true;c=setInterval(function(){n.call(o,d)},o.slow)}}if(b>=o.arr.length){g++;b=0}o.tb.rows[o.arr[b][0]].cells[o.arr[b][1]].className=(m||"glow");if(b>0){f=b-1}else{f=o.arr.length-1}o.tb.rows[o.arr[f][0]].cells[o.arr[f][1]].className="normal";if(k==true&&b==(o.prizeHandler(d))){e=0;o.enLock(false);if(c){clearInterval(c)}if(o.hitCallback){o.hitCallback.call(null,d.data)}}b++;e++},prizeHandler:function(d){return this.getIndex.call(this,d)},getIndex:function(o){var n=o.mapping,q=this;if(n&&Object.prototype.toString.call(n).slice(8,-1)==="Object"){if(n.mapKey&&n.relations){var p=n.relations[String(o.data[n.mapKey])];return p}else{if(n.index&&Object.prototype.toString.call(n.index).slice(8,-1)==="Array"){var r=l.call(null,n.index,q.arr),d=r.length;if(d===1){return r[0]}else{if(d>1){var p=r[Math.floor(parseInt(d*Math.random()))];return p}else{return Infinity}}}else{return Infinity}}}else{return Infinity}}}}());a.buildTable=function(e){var r='<table  id="'+String(e.tableId||"")+'" cellpadding="0" cellspacing="1" style="position:absolute;"><tbody>',q=document,u=Number(e.row),t=Number(e.col),m=/msie 6/i.test(navigator.userAgent);for(var o=0;o<u;o++){var s="<tr>";for(var l=0;l<t;l++){s+="<td></td>"}s+="</tr>";r+=s}r+='</tbody></table><style type="text/css">.glow {background:url(img/glow.png) no-repeat 50% 50% transparent;background-size:100% 100%;_border:2px solid red;_background-image:none;}</style>';var j="",g=e.imgsrc,v="",p="";for(var l=0;l<g.length;l++){if(g[l].indexOf("png")>-1){v=g[l]}if(g[l].indexOf("gif")>-1){p=g[l]}}if(m&&p===""){j="pngfix"}if(m&&p!==""){v=p}var n='<img style="display:block;width:100%;" src="'+v+'" class="'+j+'"/>',b=q.getElementById(e.containerId);b.innerHTML=r+n;b.style.position="relative";var c=q.getElementById(String(e.tableId||""))||b.children[0];function f(){box=b.getBoundingClientRect(),w=box.width||(box.right-box.left),h=box.height||(box.bottom-box.top);c.style.cssText="width:"+w+"px;height:"+h+"px;top:0;left:0;position:absolute;";var x=w/e.col,y=h/e.row,k=c.getElementsByTagName("td"),z=k.length;for(var d=0;d<z;d++){k[d].style.cssText="width:"+x+"px;height:"+y+"px;"}}setTimeout(function(){f()},100);window.onresize=f;return c};return a}());